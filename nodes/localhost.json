// cookbook for testing purposes and to server as an example
{
  "hostname": "localhost",
  "fqdn": "localhost.localdomain",

  "locales": {
    "packages": ["language-pack-pt", "language-pack-en"],
    "default": "pt_BR.UTF-8"
  },

  "locale": {
    "lang": "pt_BR.UTF-8",
    "lc_all": "pt_BR.UTF-8"
  },

  "tz": "America/Bahia",

  "limits": {
    "system_limits": [
      {"domain": "*", "type": "soft", "item": "nice", "value": "soft"}
    ]
  },

  "rvm": {
    "user_installs": [
      {
        "user": "noosfero",
        "rubies": [ "ree" ],
        "default_ruby": "ree",
        "gems": {
          "ree@noosfero": []
        }
      }
    ]
  },

  "java": {
    "install_flavor": "openjdk",
    "jdk_version": "7"
  },

  "postfix": {
    "mail_type": "master",
    "main": {
      "inet_interfaces": "loopback-only",

      "myhostname": "localhost",
      "mydestination": ["localhost.localdomain", "localhost"],
      "mynetworks": "107.170.19.68/32 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128"
    }
  },

  "postgresql": {
    "version": "9.3",
    "password": {
      // needed for chef-solo
      "postgres": "iqHDDo1o"
    },
    "config": {
      "shared_buffers": "128MB",
      "effective_cache_size": "512MB",
      "datestyle": "iso, dmy",
      "lc_messages": "pt_BR.UTF-8",
      "lc_monetary": "pt_BR.UTF-8",
      "lc_numeric": "pt_BR.UTF-8",
      "lc_time": "pt_BR.UTF-8"
    }
  },

  "memcached": {
    "memory": 128,
    "listen": "127.0.0.1"
  },

  "varnish": {
    "start": "yes",
    "version": "3.0",
    "listen_address": "127.0.0.1",
    "listen_port": 8080,
    "storage": "file",
    "storage_size": "1G",
    "vcl_cookbook": "noosfero"
  },

  "nginx": {
    "listen_ports": [80],
    "keepalive_timeout": 20,
    "default_site_enabled": false,
    "client_max_body_size": 0,
    "extra_configs": {
      "large_client_header_buffers": "4 16k",
      "proxy_cache_path": "/var/cache/nginx levels=1:2 keys_zone=main:100m inactive=30d max_size=500m",
      "proxy_cache_key": "$scheme$host$uri$is_args$args",
      "proxy_temp_path": "/var/tmp/nginx_proxy",
      "proxy_connect_timeout": 600,
      "proxy_send_timeout": 600,
      "proxy_read_timeout": 600,
      "send_timeout": 600
    }
  },

  "apache": {
    "version": "2.4",
    "listen_addresses": ["127.0.0.1"],
    "listen_ports": [81],
    "keepalivetimeout": 20,
    "keepaliverequests": 1000
  },

  "noosfero": {
    "service_name": "noosfero",
    "path": "/home/noosfero/escambo.org.br",

    "git_url": "https://github.com/ESCAMBO/noosfero-ecosol.git",
    "git_revision": "master",

    //"dependencies_with": "bundler",
    "dependencies_with": "bundler",
    //"upgrade_script": " ",
    "rvm_load": "ree@noosfero",

    "server_name": "localhost",
    "custom_domains": [
      "dev1.t"
    ],

    "cache": {
      "server": "varnish",
      "backend_port": 82
    },
    "server": {
      "proxy": "nginx",
      "backend": "unicorn",
      "workers": 1,
      "proxy_to_cache": true
    },

    "db": {
      "name": "noosfero_escambo.org.br_production",
      "password": "iqHDDo1o",
      "create_from_dump": "/home/braulio/Projects/noosfero-ecosol/escambo/dump.sql"
    },

    "environment": {
      "name": "ESCAMBO",
      "domain": "escambo.org.br"
    },
    "plugins": ["cms_learning", "currency", "escambo", "evaluation", "exchange", "sniffer", "solr"],

    "settings": {
      "exception_recipients": ["alantygel@gmail.com", "brauliobo@gmail.com"]
    },

    "plugin_settings": {
      "solr": {
        "port": 8983,
        "memory": 128
      }

    }
  },

  "etherpad-lite": {
    "service_name": "pad.eita",
    "service_user": "pad.eita",
    "service_group": "pad.eita",

    "domain": "pad.eita",
    "proxy_server": "nginx",

    "db_host": "localhost", 
    "db_user": "pad.eita", 
    "db_password": "aniceramdompasswordforchefsolo", 
    "db_name": "pad.eita",

    "etherpad_git_repo_url": "https://github.com/coletivoEITA/etherpad-lite.git",

    "title": "Pad EITA",
    "default_text" : "Boas vindas ao nosso editor de texto colaborativo!\n\nVocê e outras pessoas podem escrever ao mesmo tempo, cada um com sua cor, e ao mesmo tempo conversar na coluna de bate-papo à direita.\n\nBom trabalho, sempre em cooperação,\n\nequipe da EITA-Educação, Informação e Tecnologia para Autogestão (http://eita.org.br)",

    "session_key" : "fasfdsafsafdsafdsa",
    "admin_enabled": true,
    "admin_password": "hello",

    "use_abiword": false
  },

  "redmine": {
    "user"                  : "redmine",
    "deploy_to"             : "/home/redmine/redmine", 
    "repo"                  : "git://github.com/redmine/redmine.git",
    "revision"              : "e94debe4151b23be9edd7f6e5cbc4e724cde832a",
    "port"                  : "80",
    "domain"                : "redmine.eita.org.br",
    "database"              : "redmine",
    "database_user"         : "redmine",
    "user_password"         : "lqDAJMBbxyuwg",
    "server_root_password"  : ""
  },
  
  "run_list": [
/*    //"recipe[apt]",
    "recipe[locales]",
    "recipe[locale]",
    "recipe[timezone-ii]",
    "recipe[limits]",

    //"recipe[rvm::user]",
    "recipe[java]",

    "recipe[nginx]",
    "recipe[nginx_fallback_to_apache]",
    "recipe[apache2]",
    "recipe[varnish]",
    
    "recipe[postgresql]",
    "recipe[postgresql::server]",

    "recipe[memcached]",
    
    "recipe[noosfero]"
    //"recipe[etherpad-lite]" */
    "recipe[redmine]"
  ]
}


